# Build docs with Sphinx

# Sphinx cache with pickled ReST documents
set(SPHINX_CACHE_DIR "${CMAKE_CURRENT_BINARY_DIR}/_doctrees")

# HTML output directory
SET(SPHINX_HTML_DIR "${CMAKE_CURRENT_BINARY_DIR}/html")

ADD_CUSTOM_TARGET(docs ALL
  COMMAND ${SPHINX_EXECUTABLE} -b html
  -d ${SPHINX_CACHE_DIR}
  ${CMAKE_CURRENT_SOURCE_DIR}
  ${SPHINX_HTML_DIR}
  COMMENT "Generating Sphinx HTML documentation")

SET_PROPERTY(DIRECTORY APPEND PROPERTY ADDITIONAL_MAKE_CLEAN_FILES ${SPHINX_HTML_DIR})